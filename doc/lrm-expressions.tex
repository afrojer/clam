\section{Expressions}
\label{sec:expressions}

\subsection{Primary Expressions}
\label{ssec:primaryexpresions}
identifiers, constants, strings. The type of the expressions depends on the identifier, constant or string.

\subsection{Unary Operators}
\label{ssec:unaryoperators}
There are two unary operators in \sys{}, and they are only used with a
numeric-valued operand such as a numeric constant
(see~\ref{sssec:numericconstants}).
These expressions are grouped right-to-left:
\startsyn
\texttt{+}\emph{numeric-expression} \\
\texttt{-}\emph{numeric-expression}
\stopsyn

\subsubsection{\texttt{+} operator}
This operator forces the value of its numeric operand to be positive.
The resulting expression is of numeric type with a value equal to the
absolute value of the numeric operand.

\subsubsection{\texttt{-} operator}
This operator forces the value of its numeric operand to be negative.
The resulting expression is of numeric type with a value equal to the
negative of the numeric operand.

\subsection{Channel/Calc Expresions}
\label{ssec:channelexpressions}
\texttt{Channel} and \texttt{Calc} types are the basis of \texttt{Image} and
\texttt{Kernel} objects respectively. There are several operators that
manipulate \texttt{Channel}s and \texttt{Calc}s.

\subsubsection{\texttt{:} operator}
\label{sssec:colonop}
Extract or use an individual \texttt{Channel} in an image.
\startsyn
\emph{image-identifier}\texttt{:}\emph{channel-identifier}
\stopsyn
The resulting expression has a type corresponding to the
extracted \texttt{Channel}.

\subsubsection{\texttt{\$()} operator}
\label{sssec:evalop}
This operator forces the evaluation of a previously defined \texttt{Image}
\texttt{Channel}. It is generally used in the context of a convolution operation.
\startsyn
\texttt{\$(}\emph{channel-expression}\texttt{)}
\stopsyn
The resulting expression has a type corresponding to the
calculated \texttt{Channel}.

\subsection{Composition Operators}
\label{ssec:compositionops}
These operators compose an \texttt{Image} from one or more \texttt{Channels}.
All channel composition operators are left-to-right associative.

\subsubsection{\texttt{|} operator}
\label{sssec:barop}
Compose two (or more) \texttt{Channel}s or \texttt{Calc}s. The resulting expression is a
\emph{multi-channel-expression}, or \emph{multi-calc} expression, and can be assigned
to either an \texttt{Image} or a \texttt{Kernel} object respectively.
\startsyn
\emph{channel-expression} \texttt{|} \emph{channel-expression} \\
\emph{multi-channel-expression} \texttt{|} \emph{channel-expression} \\
\emph{calc-expression} \texttt{|} \emph{calc-expression} \\
\emph{multi-calc-expression} \texttt{|} \emph{calc-expression} \\
\stopsyn
Note that \texttt{Channel}s and \texttt{Calc}s are appended in order, and
subsequent operations may rely on this order.

\comment{
\subsubsection{\texttt{||} operator}
\label{sssec:doublebarop}
Compose two (or more) \texttt{Channel}s. The resulting expression is a
\emph{multi-channel-expression}, and can be assigned to either an \texttt{Image}
or a \texttt{Kernel} object. This operator differs from the \texttt{|} operator in that
it forces the serial computation of channel values. This allows subsequent channel
value calculations to use neighboring pixels of previously calculated channels.
\startsyn
\emph{channel-expression} \texttt{||} \emph{channel-expression} \\
\emph{multi-channel-expression} \texttt{||} \emph{channel-expression}
\stopsyn
} % END comment (save this for later...)

\subsection{Escaped ``C'' Expression}
\label{ssec:escapedC}
Talk about the \texttt{\#[\ldots]\#} operator.

\subsection{Assignmet Expresions}
\label{ssec:assignment}

\subsubsection{\texttt{=} assignment operator}

\subsubsection{\texttt{:=} assignment operator}

\subsubsection{\texttt{|=} assignment operator}

\comment{
\subsubsection{\texttt{\^=} assignment operator}
} % END comment - save for later...
