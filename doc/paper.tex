%
% paper.tex -- master LaTeX file for ``ImP: The Image Processing Language''
%
\newcommand{\authorlist}{Jeremy Andrus and Robert Martin and Kevin Sun and Yongxu Zhang}
\newcommand{\authoremails}{\{jca2119, rdm2128, kfs2110, yz2419\}@columbia.edu}

% Build Project proposal only
\ifcsname ifproposal\endcsname\else
  \expandafter\let\csname ifproposal\expandafter\endcsname
                  \csname iffalse\endcsname
\fi
% Build Language Reference Manual only
\ifcsname ifrefman\endcsname\else
  \expandafter\let\csname ifrefman\expandafter\endcsname
                  \csname iffalse\endcsname
\fi
\ifcsname ifbook\endcsname\else
  \expandafter\let\csname ifbook\expandafter\endcsname
                  \csname iffalse\endcsname
\fi

% Document Class
\ifbook
  \documentclass[10pt,letterpaper,titlepage,onecolumn,oneside]{book}
\else
  \documentclass{acm_proc_onecol}
\fi

\newcommand{\sys}{ImP}
\newcommand{\longtitle}{\sys{}: The Image Processing Language}
\newcommand{\comment}[1]{}

\usepackage[utf8x]{inputenc}
\usepackage{ucs}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{color}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{url}
\usepackage{underscore}
% hyphenat redefines "BreakableUnderscore", so I need
% to do some LaTeX gymnastics to make it work...
\makeatletter
\let\BreakableUnderscore\@undefined
\makeatother
\usepackage{hyphenat}
\usepackage{lastpage}
\usepackage{balance}
\usepackage{cite}
\usepackage{pdfsync}
\usepackage[colorlinks=false,
    pdftitle={\longtitle{}},
    pdfborder={0 0 0},
    pdfauthor={\authorlist{}},
    pdfdisplaydoctitle=true,
    plainpages=false]{hyperref}

\begin{document}

% this usually saves about a line-or-two by squeezing inter-sentence space
%\frenchspacing

\title{\longtitle{}}

\ifbook
  \author{\authorlist{}\\\authoremails{}}
\else
  \numberofauthors{4}
  \author {
  % 1st author
  \alignauthor Jeremy Andrus\\
    \affaddr{Dept of Computer Science}\\
    \affaddr{Columbia University}\\
    \affaddr{New York, NY}\\
    \email{jeremya@cs.columbia.edu}
  % 2nd author
  \alignauthor Robert Martin\\
    \affaddr{Dept of Computer Science}\\
    \affaddr{Columbia University}\\
    \affaddr{New York, NY}\\
    \email{rdm2128@columbia.edu}
  \and
  % 3rd author
  \alignauthor Kevin Sun\\
    \affaddr{Dept of Computer Science}\\
    \affaddr{Columbia University}\\
    \affaddr{New York, NY}\\
    \email{kfs2110@columbia.edu}
  % 4th author
  \alignauthor Yongxu Zhang\\
    \affaddr{Dept of Computer Science}\\
    \affaddr{Columbia University}\\
    \affaddr{New York, NY}\\
    \email{yz2419@columbia.edu}
  }
\fi

\maketitle

% Body of the paper in different files
\ifproposal
  % Project Proposal
  \input{proposal}
\else
  \ifrefman
    % Language Reference Manual
    \section{Language Reference Manual}
    \input{manual}
  \else
    % Final Project report is the default output here
    \tableofcontents
    \input{intro}
    \input{tutorial}
    \chapter{Language Reference Manual}
    \input{manual}
    \input{plan}
    \input{design}
    \input{testing}
    \input{lessons}
    \appendix
    \input{appendix}
    {
      \balance
      \bibliographystyle{abbrv}
      \bibliography{paper}
    }
  \fi
\fi

\end{document}
